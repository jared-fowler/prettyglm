<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="prettyglm">
<title>prettyglm: Beautiful Visualisations for Generalized Linear Models • prettyglm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="prettyglm: Beautiful Visualisations for Generalized Linear Models">
<meta property="og:description" content="prettyglm">
<meta property="og:image" content="https://jared-fowler.github.io/prettyglm/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">prettyglm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Visualising fitted GLM</h6>
    <a class="dropdown-item" href="../articles/web_only/creating_pretty_coefficients.html">Creating a pretty coefficient table</a>
    <a class="dropdown-item" href="../articles/web_only/simple_pretty_relativities.html">Creating relativity plots</a>
    <a class="dropdown-item" href="../articles/web_only/interaction_pretty_relativities.html">Creating relativity plots for interactions</a>
    <a class="dropdown-item" href="../articles/web_only/spline_pretty_relativities.html">Creating relativity plots for splines</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Visualising model predictions</h6>
    <a class="dropdown-item" href="../articles/web_only/visualisingoverallave.html">Bucketed actual vs predicted</a>
    <a class="dropdown-item" href="../articles/web_only/onewayave.html">One way actual vs expected</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="prettyglm-vignette_files/kePrint-0.0.1/kePrint.js"></script><link href="prettyglm-vignette_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>prettyglm: Beautiful Visualisations for Generalized Linear Models</h1>
                        <h4 data-toc-skip class="author">Jared
Fowler</h4>
                        
      
      
      <div class="d-none name"><code>prettyglm-vignette.Rmd</code></div>
    </div>

    
    
<p><img src="../reference/figures/logo.png" align="right" height="139"></p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>When working with Generalized Linear Models it is often useful to
create informative and beautiful summaries of the fitted model
coefficients. The goal of <code>prettyglm</code> is to provide a set of
functions to visualize the Generalized Linear Models coefficients and
performance in interactive plots which can easily be embedded in
rmarkdown reports or separately exported and shared with stakeholders.
This document introduces <code>prettyglm</code>’s main sets of
functions, and shows you how to apply them.</p>
<p>Please see the website <a href="https://jared-fowler.github.io/prettyglm/">prettyglm</a> for more
detailed documentation with html outputs, some of the outputs have been
excluded from this documentation for publication on CRAN.</p>
<p>If you don’t find the function you are looking for in
<code>prettyglm</code> consider checking out some other great packages
which help visualize the output from glms:</p>
<ul>
<li><p><code>tidycat</code></p></li>
<li><p><code>jtools</code></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the latest CRAN release with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'prettyglm'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="important-pre-processing">Important Pre-Processing<a class="anchor" aria-label="anchor" href="#important-pre-processing"></a>
</h2>
<div class="section level4">
<h4 id="model-building">Model Building<a class="anchor" aria-label="anchor" href="#model-building"></a>
</h4>
<p>To explore the functionality of <code>prettyglm</code> we will use
the titanic data set to perform logistic regression. This data set was
sourced from <a href="https://www.kaggle.com/c/titanic/data" class="external-link">kaggle</a>
and contains information about passengers aboard the titanic, and a
target variable which indicates if they survived.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jared-fowler.github.io/prettyglm/">prettyglm</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">'titanic'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">PassengerId</span>, <span class="va">Name</span>, <span class="va">Ticket</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>table.attr <span class="op">=</span> <span class="st">"style='width:10%;'"</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table style="width:10%; margin-left: auto; margin-right: auto;" class="table table table-striped table-hover table-condensed">
<thead><tr>
<th style="text-align:right;">
Survived
</th>
<th style="text-align:right;">
Pclass
</th>
<th style="text-align:left;">
Sex
</th>
<th style="text-align:right;">
Age
</th>
<th style="text-align:right;">
SibSp
</th>
<th style="text-align:right;">
Parch
</th>
<th style="text-align:right;">
Fare
</th>
<th style="text-align:left;">
Cabin
</th>
<th style="text-align:left;">
Embarked
</th>
<th style="text-align:left;">
Cabintype
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7.2500
</td>
<td style="text-align:left;">
Missing
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
Missing
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
71.2833
</td>
<td style="text-align:left;">
C85
</td>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
C
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7.9250
</td>
<td style="text-align:left;">
Missing
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
Missing
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
53.1000
</td>
<td style="text-align:left;">
C123
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
C
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8.0500
</td>
<td style="text-align:left;">
Missing
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
Missing
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8.4583
</td>
<td style="text-align:left;">
Missing
</td>
<td style="text-align:left;">
Q
</td>
<td style="text-align:left;">
Missing
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="pre-processing">Pre-processing<a class="anchor" aria-label="anchor" href="#pre-processing"></a>
</h4>
<p>A critical step for this package to work is to <strong>set all
categorical predictors as factors</strong>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Easy way to convert multiple columns to a factor.</span></span>
<span><span class="va">columns_to_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Pclass'</span>,</span>
<span>                       <span class="st">'Sex'</span>,</span>
<span>                       <span class="st">'Cabin'</span>, </span>
<span>                       <span class="st">'Embarked'</span>,</span>
<span>                       <span class="st">'Cabintype'</span><span class="op">)</span></span>
<span><span class="va">meanage</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">$</span><span class="va">Age</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">titanic</span>  <span class="op">&lt;-</span> <span class="va">titanic</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at</a></span><span class="op">(</span><span class="va">columns_to_factor</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Age <span class="op">=</span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Age</span><span class="op">)</span><span class="op">==</span><span class="cn">T</span>,<span class="va">meanage</span>,<span class="va">Age</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="building-a-glm">Building a glm<a class="anchor" aria-label="anchor" href="#building-a-glm"></a>
</h4>
<p>For this vignette we will use <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code> to build a
logistic regression model. Currently working on support for
<code>parsnip</code> and <code>workflow</code> model objects which use
the <code>glm</code> model engine.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survival_model</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Survived</span> <span class="op">~</span> <span class="va">Pclass</span> <span class="op">+</span> </span>
<span>                                        <span class="va">Sex</span> <span class="op">+</span> </span>
<span>                                        <span class="va">Fare</span> <span class="op">+</span></span>
<span>                                        <span class="va">Age</span> <span class="op">+</span></span>
<span>                                        <span class="va">Embarked</span> <span class="op">+</span> </span>
<span>                                        <span class="va">SibSp</span> <span class="op">+</span> </span>
<span>                                        <span class="va">Parch</span>, </span>
<span>                             data <span class="op">=</span> <span class="va">titanic</span>, </span>
<span>                             family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">'logit'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="pretty_coefficients">
<code>pretty_coefficients()</code><a class="anchor" aria-label="anchor" href="#pretty_coefficients"></a>
</h2>
<div class="section level3">
<h3 class="tabset" id="table-of-model-coefficients">Table of model coefficients<a class="anchor" aria-label="anchor" href="#table-of-model-coefficients"></a>
</h3>
<p>The function <code><a href="../reference/pretty_coefficients.html">pretty_coefficients()</a></code> allows you to create
a pretty table of model coefficients, which by default includes
categorical base levels.</p>
<div class="section level4">
<h4 id="simple-example">Simple Example<a class="anchor" aria-label="anchor" href="#simple-example"></a>
</h4>
<p>The simplest way to call this function is just with the model
object.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_coefficients.html">pretty_coefficients</a></span><span class="op">(</span>model_object <span class="op">=</span> <span class="va">survival_model</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="type-iii-significance-tests">Type III Significance Tests<a class="anchor" aria-label="anchor" href="#type-iii-significance-tests"></a>
</h4>
<p>You can also complete a type III test on the coefficients by
specifying a <code>type_iii</code> argument. Warning <code>Wald</code>
type III tests will fail if there are aliased coefficients in the
model.</p>
<p>You can change the significance level highlighted in the table with
<code>significance_level</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_coefficients.html">pretty_coefficients</a></span><span class="op">(</span><span class="va">survival_model</span>, type_iii <span class="op">=</span> <span class="st">'Wald'</span>, significance_level <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="changing-variable-importance-method">Changing Variable Importance Method<a class="anchor" aria-label="anchor" href="#changing-variable-importance-method"></a>
</h4>
<p>By default <code>pretty_coefficients</code> shows “model” variable
importance. But <code>vimethod</code> also accepts “permute” and “firm”
methods from . Additional parameters for these methods should also be
passed into <code>pretty_coefficients</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_coefficients.html">pretty_coefficients</a></span><span class="op">(</span>model_object <span class="op">=</span> <span class="va">survival_model</span>,</span>
<span>                    type_iii <span class="op">=</span> <span class="st">'Wald'</span>, </span>
<span>                    significance_level <span class="op">=</span> <span class="fl">0.1</span>, </span>
<span>                    vimethod <span class="op">=</span> <span class="st">'permute'</span>, </span>
<span>                    target <span class="op">=</span> <span class="st">'Survived'</span>, </span>
<span>                    metric <span class="op">=</span> <span class="st">'auc'</span>,</span>
<span>                    pred_wrapper <span class="op">=</span> <span class="va">predict.glm</span>, </span>
<span>                    reference_class <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="pretty_relativities">
<code>pretty_relativities()</code><a class="anchor" aria-label="anchor" href="#pretty_relativities"></a>
</h2>
<p><code><a href="../reference/pretty_relativities.html">pretty_relativities()</a></code> will create a plot of the desired
model variable. A different plot will be generated depending on the
class of the variable.</p>
<div class="section level3">
<h3 class="tabset" id="plot-coefficients">Plot coefficients<a class="anchor" aria-label="anchor" href="#plot-coefficients"></a>
</h3>
<p>A model relativity is a transform of the model estimate. By default
<code><a href="../reference/pretty_relativities.html">pretty_relativities()</a></code> uses ‘exp(estimate)-1’ which is
useful for GLM’s which use a log or logit link function.</p>
<p>The term ‘relativity’ is some times referred to as “odds-ratio” or
“Likelihood”. You can customize the label with the
<code>relativity_label</code> input.</p>
<div class="section level4">
<h4 id="categorical-variables">Categorical Variables<a class="anchor" aria-label="anchor" href="#categorical-variables"></a>
</h4>
<p>For categorical variables <code><a href="../reference/pretty_relativities.html">pretty_relativities()</a></code> creates
an interactive duel axis plot, which plots the fitted relativity on one
y axis, and the number of records in that category on the other y
axis.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Embarked'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="continuous-variables">Continuous Variables<a class="anchor" aria-label="anchor" href="#continuous-variables"></a>
</h4>
<p>For continuous variables <code>pretty_relativities</code> will plot
the relativity over the variables range, and the density of that
variable on a duel axis.</p>
<p>If desired you can cut off the tail end of the distributions with
<code>upper_percentile_to_cut</code> or
<code>lower_percentile_to_cut</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Fare'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="plot-interactions">Plot interactions<a class="anchor" aria-label="anchor" href="#plot-interactions"></a>
</h3>
<p>To highlight some more of <code>prettyglm</code>’s functionality we
will now build a logistic regression model with some interactions.</p>
<div class="section level4">
<h4 id="model-building-1">Model Building<a class="anchor" aria-label="anchor" href="#model-building-1"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survival_model2</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Survived</span> <span class="op">~</span> <span class="va">Pclass</span><span class="op">:</span><span class="va">Fare</span> <span class="op">+</span></span>
<span>                                         <span class="va">Age</span> <span class="op">+</span></span>
<span>                                         <span class="va">Embarked</span><span class="op">:</span><span class="va">Sex</span> <span class="op">+</span></span>
<span>                                         <span class="va">SibSp</span> <span class="op">+</span></span>
<span>                                         <span class="va">Parch</span>,</span>
<span>                              data <span class="op">=</span> <span class="va">titanic</span>,</span>
<span>                              family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">'logit'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 class="tabset" id="factorfactor-interactions">Factor:Factor Interactions<a class="anchor" aria-label="anchor" href="#factorfactor-interactions"></a>
</h4>
<div class="section level5">
<h5 id="facet">Facet<a class="anchor" aria-label="anchor" href="#facet"></a>
</h5>
<p>You can also choose to facet the plots by one of the variables.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Embarked:Sex'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model2</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    iteractionplottype <span class="op">=</span> <span class="st">'facet'</span>,</span>
<span>                    facetorcolourby <span class="op">=</span> <span class="st">'Sex'</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="colour">Colour<a class="anchor" aria-label="anchor" href="#colour"></a>
</h5>
<p>You can also choose to colour the plots by one of the variables.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Embarked:Sex'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model2</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    iteractionplottype <span class="op">=</span> <span class="st">'colour'</span>,</span>
<span>                    facetorcolourby <span class="op">=</span> <span class="st">'Embarked'</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="standard">Standard<a class="anchor" aria-label="anchor" href="#standard"></a>
</h5>
<p>You can create these relativity plots as you would for a
non-interaction.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Embarked:Sex'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model2</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 class="tabset" id="continuousfactor-interactions">Continuous:Factor Interactions<a class="anchor" aria-label="anchor" href="#continuousfactor-interactions"></a>
</h4>
<div class="section level5">
<h5 id="colour-1">Colour<a class="anchor" aria-label="anchor" href="#colour-1"></a>
</h5>
<p>By default continuous and factor interaction plots will colour by the
factor variable.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Pclass:Fare'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model2</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.03</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="facet-1">Facet<a class="anchor" aria-label="anchor" href="#facet-1"></a>
</h5>
<p>You can also facet by the factor variable.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Pclass:Fare'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model2</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    iteractionplottype <span class="op">=</span> <span class="st">'facet'</span>,</span>
<span>                    upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span>                    height <span class="op">=</span> <span class="fl">800</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="plot-splines">Plot splines<a class="anchor" aria-label="anchor" href="#plot-splines"></a>
</h3>
<p>To highlight some more of <code>prettyglm</code>’s functionality we
will now build a logistic regression model with a
<strong>spline</strong>.</p>
<div class="section level4">
<h4 id="create-the-splines">Create the splines<a class="anchor" aria-label="anchor" href="#create-the-splines"></a>
</h4>
<p><code>prettyglm</code> includes a function <code>splineit</code> to
help construct splines. This can be incorporated in the dplyr workflow
as follows.</p>
<p>For splines to work nicely in <code>prettyglm</code> use the naming
convention Variable#Start#End where # represents your desired
separator.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titanic</span>  <span class="op">&lt;-</span> <span class="va">titanic</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Age_0_18 <span class="op">=</span> <span class="fu">prettyglm</span><span class="fu">::</span><span class="fu"><a href="../reference/splineit.html">splineit</a></span><span class="op">(</span><span class="va">Age</span>,<span class="fl">0</span>,<span class="fl">18</span><span class="op">)</span>,</span>
<span>                Age_18_35 <span class="op">=</span> <span class="fu">prettyglm</span><span class="fu">::</span><span class="fu"><a href="../reference/splineit.html">splineit</a></span><span class="op">(</span><span class="va">Age</span>,<span class="fl">18</span>,<span class="fl">35</span><span class="op">)</span>,</span>
<span>                Age_35_120 <span class="op">=</span> <span class="fu">prettyglm</span><span class="fu">::</span><span class="fu"><a href="../reference/splineit.html">splineit</a></span><span class="op">(</span><span class="va">Age</span>,<span class="fl">35</span>,<span class="fl">120</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Fare_0_55 <span class="op">=</span> <span class="fu">prettyglm</span><span class="fu">::</span><span class="fu"><a href="../reference/splineit.html">splineit</a></span><span class="op">(</span><span class="va">Fare</span>,<span class="fl">0</span>,<span class="fl">55</span><span class="op">)</span>,</span>
<span>                Fare_55_600 <span class="op">=</span> <span class="fu">prettyglm</span><span class="fu">::</span><span class="fu"><a href="../reference/splineit.html">splineit</a></span><span class="op">(</span><span class="va">Fare</span>,<span class="fl">55</span>,<span class="fl">600</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fit-model-with-splines">Fit Model With Splines<a class="anchor" aria-label="anchor" href="#fit-model-with-splines"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survival_model4</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Survived</span> <span class="op">~</span> <span class="va">Pclass</span> <span class="op">+</span></span>
<span>                                         <span class="va">Sex</span><span class="op">:</span><span class="va">Fare_0_55</span> <span class="op">+</span></span>
<span>                                         <span class="va">Sex</span><span class="op">:</span><span class="va">Fare_55_600</span> <span class="op">+</span></span>
<span>                                         <span class="va">Age_0_18</span> <span class="op">+</span></span>
<span>                                         <span class="va">Age_18_35</span> <span class="op">+</span></span>
<span>                                         <span class="va">Age_35_120</span> <span class="op">+</span></span>
<span>                                         <span class="va">Embarked</span> <span class="op">+</span></span>
<span>                                         <span class="va">SibSp</span> <span class="op">+</span></span>
<span>                                         <span class="va">Parch</span>,</span>
<span>                              data <span class="op">=</span> <span class="va">titanic</span>,</span>
<span>                              family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">'logit'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="creating-a-table-of-model-coefficients-with-pretty_coefficients">Creating a table of model coefficients with pretty_coefficients<a class="anchor" aria-label="anchor" href="#creating-a-table-of-model-coefficients-with-pretty_coefficients"></a>
</h4>
<p>For interactions variables are grouped on the left pane.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_coefficients.html">pretty_coefficients</a></span><span class="op">(</span><span class="va">survival_model4</span>, significance_level <span class="op">=</span> <span class="fl">0.1</span>, spline_seperator <span class="op">=</span> <span class="st">'_'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-plots-of-fitted-coefficients-using-pretty_relativities">Create plots of fitted coefficients using pretty_relativities<a class="anchor" aria-label="anchor" href="#create-plots-of-fitted-coefficients-using-pretty_relativities"></a>
</h4>
<div class="section level5">
<h5 id="splines">Splines<a class="anchor" aria-label="anchor" href="#splines"></a>
</h5>
<p>You also need to provide a <code>spline_seperator</code> input in
<code>pretty_relativities</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Age'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    spline_seperator <span class="op">=</span> <span class="st">'_'</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 class="tabset" id="interacted-splines">Interacted Splines<a class="anchor" aria-label="anchor" href="#interacted-splines"></a>
</h5>
<div class="section level6">
<h6 id="colour-2">Colour<a class="anchor" aria-label="anchor" href="#colour-2"></a>
</h6>
<p>By default <code>pretty_relativities</code> will colour by the factor
variable.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Sex:Fare'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    spline_seperator <span class="op">=</span> <span class="st">'_'</span>,</span>
<span>                    upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.03</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level6">
<h6 id="facet-2">Facet<a class="anchor" aria-label="anchor" href="#facet-2"></a>
</h6>
<p>If you prefer to facet by the factor variable, change
<code>iteractionplottype</code> to “facet”</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_relativities.html">pretty_relativities</a></span><span class="op">(</span>feature_to_plot<span class="op">=</span> <span class="st">'Sex:Fare'</span>,</span>
<span>                    model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>                    relativity_label <span class="op">=</span> <span class="st">'Liklihood of Survival'</span>,</span>
<span>                    spline_seperator <span class="op">=</span> <span class="st">'_'</span>,</span>
<span>                    upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span>                    iteractionplottype <span class="op">=</span> <span class="st">'facet'</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="one_way_ave">
<code>one_way_ave()</code><a class="anchor" aria-label="anchor" href="#one_way_ave"></a>
</h2>
<div class="section level3">
<h3 class="tabset" id="visualising-one-way-performance">Visualising one-way performance<a class="anchor" aria-label="anchor" href="#visualising-one-way-performance"></a>
</h3>
<div class="section level4">
<h4 id="continuous-variable">Continuous Variable<a class="anchor" aria-label="anchor" href="#continuous-variable"></a>
</h4>
<p>For continuous variables <code>one_way_ave</code> will bucket value
into 30 buckets by default, and plot the density on a dual axis.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/one_way_ave.html">one_way_ave</a></span><span class="op">(</span>feature_to_plot <span class="op">=</span> <span class="st">'Age'</span>,</span>
<span>            model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>            target_variable <span class="op">=</span> <span class="st">'Survived'</span>,</span>
<span>            data_set <span class="op">=</span> <span class="va">titanic</span>,</span>
<span>            upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>            lower_percentile_to_cut <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="discrete-variable">Discrete Variable<a class="anchor" aria-label="anchor" href="#discrete-variable"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/one_way_ave.html">one_way_ave</a></span><span class="op">(</span>feature_to_plot <span class="op">=</span> <span class="st">'Cabintype'</span>,</span>
<span>            model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>            target_variable <span class="op">=</span> <span class="st">'Survived'</span>,</span>
<span>            data_set <span class="op">=</span> <span class="va">titanic</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 class="tabset" id="customising-one-way-performance-plots">Customising one-way performance plots<a class="anchor" aria-label="anchor" href="#customising-one-way-performance-plots"></a>
</h3>
<div class="section level4">
<h4 id="faceting">Faceting<a class="anchor" aria-label="anchor" href="#faceting"></a>
</h4>
<p>You can facet the <code>one_way_ave</code> plot by providing a
variable to facet by in <code>facetby</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/one_way_ave.html">one_way_ave</a></span><span class="op">(</span>feature_to_plot <span class="op">=</span> <span class="st">'Age'</span>,</span>
<span>            model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>            target_variable <span class="op">=</span> <span class="st">'Survived'</span>,</span>
<span>            facetby <span class="op">=</span> <span class="st">'Sex'</span>,</span>
<span>            data_set <span class="op">=</span> <span class="va">titanic</span>,</span>
<span>            upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>            lower_percentile_to_cut <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="custom-predict-function">Custom Predict Function<a class="anchor" aria-label="anchor" href="#custom-predict-function"></a>
</h4>
<p>By default <code>one_way_ave</code> uses . If you would like to use
<code>one_way_ave</code> with another model type (which is not
compatible with predict.glm), or provide modified predictions,
<code>one_way_ave</code> allows a custom prediction function.</p>
<p>This function must return a data.frame with two columns:
“Actual_Values” and “Predicted_Values”.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Custom Predict Function and facet</span></span>
<span><span class="va">a_custom_predict_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">target</span>, <span class="va">model_object</span>, <span class="va">dataset</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span>
<span>  <span class="va">Actual_Values</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">dataset</span>, <span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">target</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">Actual_Values</span><span class="op">)</span> <span class="op">==</span> <span class="st">'factor'</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">Actual_Values</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">Actual_Values</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">Predicted_Values</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">model_object</span>, <span class="va">dataset</span>, type<span class="op">=</span><span class="st">'response'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">to_return</span> <span class="op">&lt;-</span>  <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Actual_Values <span class="op">=</span> <span class="va">Actual_Values</span>,</span>
<span>                                 Predicted_Values <span class="op">=</span> <span class="va">Predicted_Values</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">to_return</span> <span class="op">&lt;-</span> <span class="va">to_return</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Predicted_Values <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Predicted_Values</span> <span class="op">&gt;</span> <span class="fl">0.4</span>,<span class="fl">0.4</span>,<span class="va">Predicted_Values</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">to_return</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="../reference/one_way_ave.html">one_way_ave</a></span><span class="op">(</span>feature_to_plot <span class="op">=</span> <span class="st">'Age'</span>,</span>
<span>            model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>            target_variable <span class="op">=</span> <span class="st">'Survived'</span>,</span>
<span>            data_set <span class="op">=</span> <span class="va">titanic</span>,</span>
<span>            upper_percentile_to_cut <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>            lower_percentile_to_cut <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>            predict_function <span class="op">=</span> <span class="va">a_custom_predict_function</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="actual_expected_bucketed">
<code>actual_expected_bucketed()</code><a class="anchor" aria-label="anchor" href="#actual_expected_bucketed"></a>
</h2>
<div class="section level3">
<h3 class="tabset" id="actual-vs-expected-bucketed-by-prediction-percentile">Actual vs Expected Bucketed By Prediction
Percentile<a class="anchor" aria-label="anchor" href="#actual-vs-expected-bucketed-by-prediction-percentile"></a>
</h3>
<div class="section level4">
<h4 id="standard-1">Standard<a class="anchor" aria-label="anchor" href="#standard-1"></a>
</h4>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/actual_expected_bucketed.html">actual_expected_bucketed</a></span><span class="op">(</span>target_variable <span class="op">=</span> <span class="st">'Survived'</span>,</span>
<span>                         model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>                         data_set <span class="op">=</span> <span class="va">titanic</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="faceted">Faceted<a class="anchor" aria-label="anchor" href="#faceted"></a>
</h4>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/actual_expected_bucketed.html">actual_expected_bucketed</a></span><span class="op">(</span>target_variable <span class="op">=</span> <span class="st">'Survived'</span>,</span>
<span>                         model_object <span class="op">=</span> <span class="va">survival_model4</span>,</span>
<span>                         data_set <span class="op">=</span> <span class="va">titanic</span>, </span>
<span>                         facetby <span class="op">=</span> <span class="st">'Sex'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jared Fowler.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
